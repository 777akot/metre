import * as React from 'react';
import { Chip, Avatar, TextField, CardContent, Typography, Card, ListItem, ListItemText, ListItemSecondaryAction, IconButton } from '@material-ui/core';
import { Add } from '@material-ui/icons';

export const column = (accessor = '') => {
  return {
    id: Math.random().toString(36).substring(7),
    Header: accessor,
    accessor: accessor,
    Filter: ({ filter, onChange }) => (
      <Filter
        value={filter && filter.value}
        onChange={onChange}
      />
    ),
    ExistsColumn,
  };
};

export const query = (f) => ({
  [f.id]: { $regex : `.*${f.value}.*` },
});

export class PossibleColumn extends React.Component<any, any, any> {
  onAdd = () => this.props.onAdd(column());
  render() {
    const { onAdd, ...props } = this.props;

    return <ListItem button {...props}>
      <ListItemText inset primary={'string'}/>
      <ListItemSecondaryAction>
        <IconButton onClick={this.onAdd}>
          <Add />
        </IconButton>
      </ListItemSecondaryAction>
    </ListItem>;
  }
}

export class Filter extends React.Component<any, any, any> {
  render() {
    const { value, onChange } = this.props;

    return <TextField
      style={{ margin: 0 }}
      margin="normal"
      variant="outlined"
      fullWidth
      value={value || ''}
      onChange={event => onChange(event.target.value)}
    />;
  }
}

export class ExistsColumn extends React.Component<any, any, any> {
  render() {
    const { value, onChange } = this.props;

    return <ListItem button {...this.props}>
      <ListItemText inset primary={'string'}/>
      <Filter
        value={value}
        onChange={onChange}
      />
    </ListItem>;
  }
}

export class Cell extends React.Component<any, any, any> {
  render() {
    const { value } = this.props;
    return value;
  }
}